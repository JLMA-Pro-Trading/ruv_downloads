# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2021"
name = "cuda-rust-wasm"
version = "0.1.6"
authors = ["CUDA-Rust Team"]
build = "build.rs"
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "CUDA to Rust transpiler with WebGPU/WASM support"
readme = "README.md"
keywords = [
    "cuda",
    "gpu",
    "webgpu",
    "wasm",
    "transpiler",
]
categories = [
    "development-tools",
    "web-programming",
    "wasm",
]
license = "MIT OR Apache-2.0"
repository = "https://github.com/vibecast/cuda-rust-wasm"

[features]
browser-tests = []
cuda-backend = ["cuda-sys"]
debug-transpiler = []
default = [
    "native-gpu",
    "serde",
]
gpu = []
memory-safety = []
native-bindings = ["bindgen"]
native-gpu = [
    "cuda-sys",
    "opencl3",
]
opencl-backend = ["opencl3"]
optimized-build = []
parallel-compilation = []
regression-tests = []
serde = [
    "dep:serde",
    "dep:serde_json",
    "dep:bincode",
]
slow-tests = []
stress-tests = []
vulkan = ["vulkano"]
wasm-simd = []
webgpu = []
webgpu-only = []

[lib]
name = "cuda_rust_wasm"
crate-type = [
    "cdylib",
    "rlib",
]
path = "src/lib.rs"

[[bin]]
name = "cuda2rust"
path = "src/bin/cuda2rust.rs"

[[example]]
name = "vector_add"
path = "examples/vector_add.rs"

[[test]]
name = "browser_tests"
path = "tests/browser_tests.rs"

[[test]]
name = "cross_platform_tests"
path = "tests/cross_platform_tests.rs"

[[test]]
name = "integration_tests"
path = "tests/integration_tests.rs"

[[test]]
name = "memory_safety_tests"
path = "tests/memory_safety_tests.rs"

[[test]]
name = "memory_tests"
path = "tests/memory_tests.rs"

[[test]]
name = "parser_tests"
path = "tests/parser_tests.rs"

[[test]]
name = "property_tests"
path = "tests/property_tests.rs"

[[test]]
name = "runtime_tests"
path = "tests/runtime_tests.rs"

[[test]]
name = "transpiler_tests"
path = "tests/transpiler_tests.rs"

[[bench]]
name = "kernel_benchmarks"
path = "benches/kernel_benchmarks.rs"
harness = false

[[bench]]
name = "memory_benchmarks"
path = "benches/memory_benchmarks.rs"
harness = false

[[bench]]
name = "performance_benchmarks"
path = "benches/performance_benchmarks.rs"

[[bench]]
name = "regression_benchmarks"
path = "benches/regression_benchmarks.rs"
harness = false
required-features = ["regression-tests"]

[[bench]]
name = "transpiler_benchmarks"
path = "benches/transpiler_benchmarks.rs"
harness = false

[[bench]]
name = "wasm_vs_native_benchmarks"
path = "benches/wasm_vs_native_benchmarks.rs"
harness = false

[dependencies.anyhow]
version = "1.0"

[dependencies.async-trait]
version = "0.1.88"

[dependencies.bincode]
version = "1.3"
optional = true

[dependencies.bytemuck]
version = "1.14"
features = ["derive"]

[dependencies.clap]
version = "4.4"
features = ["derive"]

[dependencies.crossbeam]
version = "0.8"

[dependencies.env_logger]
version = "0.11"

[dependencies.futures]
version = "0.3"

[dependencies.log]
version = "0.4"

[dependencies.logos]
version = "0.14"

[dependencies.nom]
version = "7.1"

[dependencies.num-traits]
version = "0.2.19"

[dependencies.parking_lot]
version = "0.12"

[dependencies.pollster]
version = "0.4.0"

[dependencies.proc-macro2]
version = "1.0"

[dependencies.quote]
version = "1.0"

[dependencies.rand]
version = "0.8"

[dependencies.serde]
version = "1.0"
features = ["derive"]
optional = true

[dependencies.serde_json]
version = "1.0"
optional = true

[dependencies.syn]
version = "2.0"

[dependencies.thiserror]
version = "1.0"

[dependencies.tokio]
version = "1.35"
features = [
    "rt",
    "sync",
    "time",
]
default-features = false

[dependencies.tracing]
version = "0.1"

[dependencies.tracing-subscriber]
version = "0.3"

[dependencies.wgpu]
version = "0.19"
features = [
    "webgl",
    "webgpu",
]

[dev-dependencies.approx]
version = "0.5"

[dev-dependencies.cargo-tarpaulin]
version = "0.27"

[dev-dependencies.criterion]
version = "0.5"
features = ["html_reports"]

[dev-dependencies.pretty_assertions]
version = "1.4"

[dev-dependencies.proptest]
version = "1.4"

[dev-dependencies.quickcheck]
version = "1.0"

[dev-dependencies.rand]
version = "0.8"

[dev-dependencies.tempfile]
version = "3.8"

[dev-dependencies.tokio-test]
version = "0.4"

[build-dependencies.bindgen]
version = "0.69"
optional = true

[build-dependencies.cc]
version = "1.0"

[build-dependencies.lalrpop]
version = "0.20"

[build-dependencies.pkg-config]
version = "0.3"

[target.'cfg(not(target_arch = "wasm32"))'.dependencies.cuda-sys]
version = "0.2"
optional = true

[target.'cfg(not(target_arch = "wasm32"))'.dependencies.opencl3]
version = "0.9"
optional = true

[target.'cfg(not(target_arch = "wasm32"))'.dependencies.vulkano]
version = "0.34"
optional = true

[target.'cfg(target_arch = "wasm32")'.dependencies.console_error_panic_hook]
version = "0.1"

[target.'cfg(target_arch = "wasm32")'.dependencies.getrandom]
version = "0.2"
features = ["js"]

[target.'cfg(target_arch = "wasm32")'.dependencies.js-sys]
version = "0.3"

[target.'cfg(target_arch = "wasm32")'.dependencies.tokio]
version = "1.35"
features = [
    "rt",
    "sync",
    "time",
]
default-features = false

[target.'cfg(target_arch = "wasm32")'.dependencies.wasm-bindgen]
version = "0.2"

[target.'cfg(target_arch = "wasm32")'.dependencies.wasm-bindgen-futures]
version = "0.4"

[target.'cfg(target_arch = "wasm32")'.dependencies.web-sys]
version = "0.3"
features = [
    "console",
    "Window",
    "Document",
    "Element",
    "HtmlCanvasElement",
    "WebGl2RenderingContext",
    "GpuDevice",
    "GpuQueue",
    "GpuBuffer",
    "GpuTexture",
    "GpuShaderModule",
    "GpuComputePipeline",
    "GpuBindGroup",
    "GpuBindGroupLayout",
    "GpuCommandEncoder",
    "GpuComputePassEncoder",
]

[target.'cfg(target_arch = "wasm32")'.dependencies.wgpu]
version = "0.19"
features = ["webgl"]

[profile.bench]
lto = true
codegen-units = 1
debug = 2
inherits = "release"

[profile.release]
opt-level = 3
lto = true
codegen-units = 1

[profile.wasm-dev]
opt-level = 1
lto = "thin"
panic = "abort"
inherits = "dev"

[profile.wasm-perf]
opt-level = 3
lto = "fat"
codegen-units = 1
debug = 0
panic = "abort"
inherits = "release"
strip = true

[profile.wasm-size]
opt-level = "z"
lto = "fat"
codegen-units = 1
panic = "abort"
overflow-checks = false
inherits = "release"
strip = true
