{"version":3,"sources":["../../src/cli/commands/init.ts"],"names":[],"mappings":"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","file":"init.js","sourcesContent":["import { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport enquirer from 'enquirer';\nimport { writeFile, mkdir } from 'fs/promises';\nimport { resolve } from 'path';\nimport { existsSync } from 'fs';\n\nconst { prompt } = enquirer;\n\nexport const initCommand = new Command('init')\n  .description('Initialize ultrathink configuration')\n  .option('-f, --force', 'Overwrite existing configuration')\n  .option('--skip-prompts', 'Skip interactive prompts, use defaults')\n  .action(async (options) => {\n    const spinner = ora('Initializing ultrathink...').start();\n\n    try {\n      const configPath = resolve(process.cwd(), 'ultrathink.config.json');\n\n      // Check if config already exists\n      if (existsSync(configPath) && !options.force) {\n        spinner.fail('Configuration file already exists');\n        console.log(chalk.yellow('\\nUse --force to overwrite existing configuration'));\n        process.exit(1);\n      }\n\n      spinner.stop();\n\n      // Prompt for configuration\n      let config: any;\n\n      if (options.skipPrompts) {\n        config = getDefaultConfig();\n      } else {\n        config = await promptForConfig();\n      }\n\n      spinner.start('Creating configuration file...');\n\n      // Create output directory if needed\n      if (config.output) {\n        await mkdir(resolve(process.cwd(), config.output), { recursive: true });\n      }\n\n      // Write configuration\n      await writeFile(\n        configPath,\n        JSON.stringify(config, null, 2),\n        'utf-8'\n      );\n\n      // Create .gitignore if it doesn't exist\n      const gitignorePath = resolve(process.cwd(), '.gitignore');\n      if (!existsSync(gitignorePath)) {\n        await writeFile(\n          gitignorePath,\n          'node_modules/\\ndist/\\n*.log\\n.env\\n',\n          'utf-8'\n        );\n      }\n\n      // Create example env file\n      const envExamplePath = resolve(process.cwd(), '.env.example');\n      await writeFile(\n        envExamplePath,\n        '# Ultrathink environment variables\\n# Copy to .env and fill in your values\\n\\n# API Keys\\n# API_KEY=your_api_key_here\\n',\n        'utf-8'\n      );\n\n      spinner.succeed(chalk.green('Initialization complete!'));\n\n      console.log(chalk.cyan('\\nConfiguration created:'));\n      console.log(chalk.gray(`  ${configPath}`));\n      console.log(chalk.gray(`  ${envExamplePath}`));\n\n      console.log(chalk.cyan('\\nNext steps:'));\n      console.log(chalk.gray('  1. Copy .env.example to .env and configure'));\n      console.log(chalk.gray('  2. Run: ultrathink generate <spec>'));\n      console.log(chalk.gray('  3. Run: ultrathink server'));\n\n    } catch (error) {\n      spinner.fail(chalk.red('Initialization failed'));\n      console.error(chalk.red('Error:'), error instanceof Error ? error.message : error);\n      if (options.parent?.opts().debug) {\n        console.error(error);\n      }\n      process.exit(1);\n    }\n  });\n\nasync function promptForConfig(): Promise<any> {\n  console.log(chalk.cyan('\\nUltrathink Configuration Setup\\n'));\n\n  const answers = await prompt<{\n    projectName: string;\n    output: string;\n    generateTypes: boolean;\n    validation: boolean;\n    transport: string;\n  }>([\n    {\n      type: 'input',\n      name: 'projectName',\n      message: 'Project name:',\n      initial: 'my-ultrathink-project'\n    },\n    {\n      type: 'input',\n      name: 'output',\n      message: 'Output directory for generated code:',\n      initial: './src/generated'\n    },\n    {\n      type: 'confirm',\n      name: 'generateTypes',\n      message: 'Generate TypeScript types?',\n      initial: true\n    },\n    {\n      type: 'confirm',\n      name: 'validation',\n      message: 'Enable input validation?',\n      initial: true\n    },\n    {\n      type: 'select',\n      name: 'transport',\n      message: 'Default transport:',\n      choices: ['stdio', 'http', 'sse'],\n      initial: 0\n    }\n  ]);\n\n  return {\n    name: answers.projectName,\n    version: '0.1.0',\n    output: answers.output,\n    generation: {\n      types: answers.generateTypes,\n      validation: answers.validation,\n      experimental: false\n    },\n    server: {\n      transport: answers.transport,\n      port: 3000,\n      host: 'localhost'\n    },\n    wrappers: []\n  };\n}\n\nfunction getDefaultConfig(): any {\n  return {\n    name: 'my-ultrathink-project',\n    version: '0.1.0',\n    output: './src/generated',\n    generation: {\n      types: true,\n      validation: true,\n      experimental: false\n    },\n    server: {\n      transport: 'stdio',\n      port: 3000,\n      host: 'localhost'\n    },\n    wrappers: []\n  };\n}\n"]}